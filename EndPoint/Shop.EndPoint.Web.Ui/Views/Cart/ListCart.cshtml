@model List<ShopingCartViewModel>
@inject IGalleryService galleryservice
@inject IProductService productservice

@{
    
    ViewBag.Titel = "سبد خرید";
    ViewBag.Breadcromb = "سبد خرید";

}

<partial name="_HeaderPartial" />


@{
    if (Model.Count() >= 1)
    {
        <div class='cart_part1'>
            <div class='container'>
                <div class='inner'>
                    <div class='top_part'>
                        <ul class='step clearfix none_list_style'>
                            <li class='item active'>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>1</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;" xml:space="preserve">
                                            <path id="dec-post-arrow" d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />

                                </svg>
                                        </div>
                                    </div><!--close .number-->
                                    <div class='content'>
                                        <span>سبد خرید</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;" xml:space="preserve">
                                            <path id="dec-post-arrow_1_" d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                   </svg>
                                        </div>
                                    </div><!--close .content-->
                                </a>
                            </li><!--close .item-->
                            <li class='item  '>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>2</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />



                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />



                                    </svg>
                                        </div>
                                    </div>
                                    <div class='content'>
                                        <span>اطلاعات پستی گیرنده</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                  </svg>
                                        </div>
                                    </div>
                                </a>
                            </li><!--close .item-->
                            <li class='item  '>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>3</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />
                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />
                                    </svg>
                                        </div>
                                    </div>
                                    <div class='content'>
                                        <span>اطلاعات ارسال سفارش</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                   </svg>
                                        </div>
                                    </div>
                                </a>
                            </li><!--close .item-->
                            <li class='item  '>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>4</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />



                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />



                                     </svg>
                                        </div>
                                    </div>
                                    <div class='content'>
                                        <span>بازبینی سفارش</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                   </svg>
                                        </div>
                                    </div>
                                </a>
                            </li>

                        </ul>
                    </div>

                    <div class='bottom_part'>
                        <div class='table_style1'>
                            <table>
                                <thead>
                                    <tr>
                                        <th class='pic text-center'><span>محصول</span></th>
                                        <th class='subject text-center'><span>شرح</span></th>
                                        <th class='price text-center'><span>قیمت واحد</span></th>
                                        <th class='count text-center'><span>تعداد</span></th>
                                        <th class='delet text-center'><span>حذف</span></th>
                                        <th class='total_price text-center  '><span>قیمت کل</span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model)
                                    {

                                        var product = productservice.GetByIdPro(item.ProductId);
                                        var Pricepro = Math.Round(product.Price);
                                        var Priceproduct = string.Format("{0:0,0}", Pricepro);


                                        <tr>
                                            <td>
                                                <a asp-controller="Product" asp-action="ProductDetails" asp-route-productid="@item.ProductId" title='@product.Titel' class='link'>
                                                    @{
                                                        string UrlImg = galleryservice.GetPicName(item.ProductId);
                                                    }
                                                    <img class='pic' src='/uploads/Products/@UrlImg' title='' alt=''>
                                                </a>
                                            </td>
                                            <td>@product.Titel</td>
                                            <td><span class='price'>@Priceproduct</span></td>
                                            <td>
                                                <div class='quantity_style1'>

                                                    <input type='text' data-item="@item.Count" value='@item.Count'>

                                                </div>
                                            </td>
                                            <td>
                                                <a asp-action="RemoveCart" asp-controller="Cart" asp-route-cartid="@item.ShoppingCartId">
                                                    <span class='delet'><i class='i-cancel'></i></span>
                                                </a>
                                            </td>
                                            <td>
                                                <span class='total_price'>
                                                    @{
                                                        var price = item.Price;
                                                        var count = item.Count;
                                                        var pricecount = price * count;
                                                        var PriceProduct = Math.Round(pricecount);
                                                        var PriceProstring = string.Format("{0:0,0}", PriceProduct);
                                                    }

                                                    @PriceProstring

                                                </span>
                                            </td>
                                        </tr>
                                     
                                    }
                                </tbody>
                            </table>
                        </div><!-- close .table_style1 -->
                        <div class='all_product_price clearfix'>
                            <div class='off_price'>
                                <span class='title'>تخفیف :</span>
                                <span class='text'>
                                    @{
                                        var Price = Math.Round(ViewBag.Discount);
                                        var Pricestring = string.Format("{0:0,0}", Price);
                                    }

                                    @Pricestring تومان     
                                </span>
                            </div>
                            <div class='total_price'>
                                <span class='title'>قیمت کل با احتساب  9 درصد مالیات برارزش افزوده :</span>
                                <span class='text'>
                                    @{
                                        var Disprice = Math.Round(ViewBag.sumprice);
                                        var Dispricestring = string.Format("{0:0,0}", Disprice);
                                    }

                                    @Dispricestring تومان
                                </span>
                            </div>
                        </div>
                        <div class='btn_part'>
                            <a asp-action="PostInformation" asp-controller="Cart" title='' class='btn_style1 add_cart'>
                                <i class='i-shop'></i><span>تکمیل سفارش خرید</span>
                            </a>
                        </div>
                    </div><!--close .bottom_part-->
                </div><!--close .inner-->
            </div><!--close .container-->
        </div><!--close .cart_part1-->

    }
    else
    {
        <div class='cart_part1'>
            <div class='container'>
                <div class='inner'>
                    <div class='top_part'>
                        <ul class='step clearfix none_list_style'>
                            <li class='item      active'>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>1</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />



                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />



                                                                                                </svg>
                                        </div>
                                    </div><!--close .number-->
                                    <div class='content'>
                                        <span>سبد خرید</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                                                                                 </svg>
                                        </div>
                                    </div><!--close .content-->
                                </a>
                            </li><!--close .item-->
                            <li class='item  '>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>3</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />



                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />



                                                                                                 </svg>
                                        </div>
                                    </div>
                                    <div class='content'>
                                        <span>اطلاعات پستی گیرنده</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                                                                                     </svg>
                                        </div>
                                    </div>
                                </a>
                            </li><!--close .item-->
                            <li class='item  '>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>4</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />



                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />



                                                                                              </svg>
                                        </div>
                                    </div>
                                    <div class='content'>
                                        <span>اطلاعات ارسال سفارش</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                                                                           </svg>
                                        </div>
                                    </div>
                                </a>
                            </li><!--close .item-->
                            <li class='item  '>
                                <a href='' title='' class='link'>
                                    <div class='number'>
                                        <span>5</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="-90 -1 792 737" style="enable-background:new -90 -1 792 737;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow"
                                                  d="M702,736c-237.6-26.4-369.6-158.4-396-396C279.6,577.6,147.6,709.6-90,736" />



                                            <path id="dec-post-arrow_1_"
                                                  d="M-90-1c237.6,26.4,369.6,158.4,396,396C332.4,157.4,464.4,25.4,702-1" />



                                                                                              </svg>
                                        </div>
                                    </div>
                                    <div class='content'>
                                        <span>بازبینی سفارش</span>
                                        <div class='svg_arrow'>
                                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                 viewBox="0 199 792 396" style="enable-background:new 0 199 792 396;"
                                                 xml:space="preserve">
                                            <path id="dec-post-arrow_1_"
                                                  d="M0,198c237.6,26.4,369.6,158.4,396,396c26.4-237.6,158.4-369.6,396-396" />



                                                                                               </svg>
                                        </div>
                                    </div>
                                </a>
                            </li><!--close .item-->

                        </ul><!--close .step-->
                    </div><!--close .top_part-->
                    <div class='bottom_part'>
                        <div class="no_item">

                            <div class="table1">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td colspan="2" width="220">
                                               
                                                <span><h3 class="text-center">محصولی انتخاب نشده است</h3></span>
                                             
                                            </td>
                                           

                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div><!--close .bottom_part-->
                </div><!--close .inner-->
            </div><!--close .container-->
        </div><!--close .cart_part1-->
    }
}
